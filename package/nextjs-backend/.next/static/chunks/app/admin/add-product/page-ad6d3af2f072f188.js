(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[980],{1336:(e,a,r)=>{Promise.resolve().then(r.bind(r,7542))},7542:(e,a,r)=>{"use strict";r.r(a),r.d(a,{default:()=>n});var l=r(5155),t=r(2115),s=r(6046),i=r(8173),d=r.n(i);function n(){let e=(0,s.useRouter)(),[a,r]=(0,t.useState)(!1),[i,n]=(0,t.useState)(!1),[c,o]=(0,t.useState)(""),[u,m]=(0,t.useState)(""),[x,p]=(0,t.useState)({title:"",slug:"",category:"",image_url:"",affiliate_link:"",is_active:!0,mrp:"",discounted_price:""}),g=async e=>{var a;let r=null===(a=e.target.files)||void 0===a?void 0:a[0];if(r){n(!0),o("");try{let e=new FormData;e.append("file",r);let a=await fetch("/api/admin/upload",{method:"POST",body:e}),l=await a.json();if(!l.success){o(l.error||"Upload failed");return}p({...x,image_url:l.data.url})}catch(e){o("Failed to upload image")}finally{n(!1)}}},b=async a=>{a.preventDefault(),o(""),m(""),r(!0);try{let a=await fetch("/api/admin/products",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(x)}),r=await a.json();if(!r.success){o(r.error||"Failed to create product");return}m("Product created successfully!"),setTimeout(()=>e.push("/admin/dashboard"),1500)}catch(e){o("An error occurred")}finally{r(!1)}};return(0,l.jsxs)("div",{className:"min-h-screen bg-gray-100",children:[(0,l.jsx)("header",{className:"bg-white shadow",children:(0,l.jsxs)("div",{className:"max-w-4xl mx-auto px-4 py-4 flex justify-between items-center",children:[(0,l.jsx)("h1",{className:"text-2xl font-bold",children:"Add New Product"}),(0,l.jsx)(d(),{href:"/admin/dashboard",className:"text-blue-600 hover:underline",children:"← Back to Dashboard"})]})}),(0,l.jsx)("main",{className:"max-w-4xl mx-auto px-4 py-8",children:(0,l.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[c&&(0,l.jsx)("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4",children:c}),u&&(0,l.jsx)("div",{className:"bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded mb-4",children:u}),(0,l.jsxs)("form",{onSubmit:b,className:"space-y-6",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Product Title *"}),(0,l.jsx)("input",{type:"text",value:x.title,onChange:e=>{let a=e.target.value,r=a.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-|-$/g,"");p({...x,title:a,slug:r})},className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500",required:!0})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"URL Slug *"}),(0,l.jsx)("input",{type:"text",value:x.slug,onChange:e=>p({...x,slug:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500",required:!0}),(0,l.jsxs)("p",{className:"text-sm text-gray-500 mt-1",children:["URL: /product/",x.slug||"your-slug"]})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Category"}),(0,l.jsxs)("select",{value:x.category,onChange:e=>p({...x,category:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500",children:[(0,l.jsx)("option",{value:"",children:"Select Category"}),(0,l.jsx)("option",{value:"1",children:"Laptop Deals"}),(0,l.jsx)("option",{value:"2",children:"Mobile Deals"}),(0,l.jsx)("option",{value:"3",children:"Home Appliances"}),(0,l.jsx)("option",{value:"4",children:"Laundry & Cleaning"}),(0,l.jsx)("option",{value:"5",children:"Audio & Headphones"}),(0,l.jsx)("option",{value:"6",children:"Study Furniture"}),(0,l.jsx)("option",{value:"7",children:"Entertainment"})]})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Product Image"}),(0,l.jsx)("input",{type:"file",accept:"image/*",onChange:g,className:"w-full px-3 py-2 border border-gray-300 rounded-md",disabled:i}),i&&(0,l.jsx)("p",{className:"text-sm text-blue-600 mt-1",children:"Uploading..."}),x.image_url&&(0,l.jsx)("div",{className:"mt-2",children:(0,l.jsx)("img",{src:x.image_url,alt:"Preview",className:"h-32 object-contain rounded border"})})]}),(0,l.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"MRP (Original Price) ₹"}),(0,l.jsx)("input",{type:"number",value:x.mrp,onChange:e=>p({...x,mrp:e.target.value}),placeholder:"54999",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Discounted Price ₹"}),(0,l.jsx)("input",{type:"number",value:x.discounted_price,onChange:e=>p({...x,discounted_price:e.target.value}),placeholder:"45999",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500"})]})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Affiliate Link *"}),(0,l.jsx)("input",{type:"url",value:x.affiliate_link,onChange:e=>p({...x,affiliate_link:e.target.value}),placeholder:"https://amazon.com/dp/...",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500",required:!0})]}),(0,l.jsxs)("div",{className:"flex items-center",children:[(0,l.jsx)("input",{type:"checkbox",id:"is_active",checked:x.is_active,onChange:e=>p({...x,is_active:e.target.checked}),className:"h-4 w-4 text-blue-600 border-gray-300 rounded"}),(0,l.jsx)("label",{htmlFor:"is_active",className:"ml-2 text-sm text-gray-700",children:"Active (visible on website)"})]}),(0,l.jsx)("button",{type:"submit",disabled:a||i,className:"w-full bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700 disabled:opacity-50",children:a?"Creating...":"Create Product"})]})]})})]})}}},e=>{var a=a=>e(e.s=a);e.O(0,[28,441,517,358],()=>a(1336)),_N_E=e.O()}]);
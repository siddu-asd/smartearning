(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[53],{9311:(e,t,a)=>{Promise.resolve().then(a.bind(a,4651))},4651:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});var s=a(5155),r=a(2115),l=a(6046),d=a(8173),i=a.n(d);function n(){let e=(0,l.useRouter)(),[t,a]=(0,r.useState)(!1),[d,n]=(0,r.useState)(!1),[o,c]=(0,r.useState)(""),[u,m]=(0,r.useState)(""),[x,g]=(0,r.useState)({title:"",slug:"",content:"",featured_image:"",meta_title:"",meta_description:"",category:"",published:!1}),h=async e=>{var t;let a=null===(t=e.target.files)||void 0===t?void 0:t[0];if(a){n(!0),c("");try{let e=new FormData;e.append("file",a);let t=await fetch("/api/admin/upload",{method:"POST",body:e}),s=await t.json();if(!s.success){c(s.error||"Upload failed");return}g({...x,featured_image:s.data.url})}catch(e){c("Failed to upload image")}finally{n(!1)}}},b=async t=>{t.preventDefault(),c(""),m(""),a(!0);try{let t=await fetch("/api/admin/blogs",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(x)}),a=await t.json();if(!a.success){c(a.error||"Failed to create blog");return}m("Blog created successfully!"),setTimeout(()=>e.push("/admin/dashboard"),1500)}catch(e){c("An error occurred")}finally{a(!1)}};return(0,s.jsxs)("div",{className:"min-h-screen bg-gray-100",children:[(0,s.jsx)("header",{className:"bg-white shadow",children:(0,s.jsxs)("div",{className:"max-w-4xl mx-auto px-4 py-4 flex justify-between items-center",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold",children:"Add New Blog Post"}),(0,s.jsx)(i(),{href:"/admin/dashboard",className:"text-blue-600 hover:underline",children:"â† Back to Dashboard"})]})}),(0,s.jsx)("main",{className:"max-w-4xl mx-auto px-4 py-8",children:(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[o&&(0,s.jsx)("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4",children:o}),u&&(0,s.jsx)("div",{className:"bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded mb-4",children:u}),(0,s.jsxs)("form",{onSubmit:b,className:"space-y-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Blog Title *"}),(0,s.jsx)("input",{type:"text",value:x.title,onChange:e=>{let t=e.target.value,a=t.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-|-$/g,"");g({...x,title:t,slug:a,meta_title:t})},className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500",required:!0})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"URL Slug *"}),(0,s.jsx)("input",{type:"text",value:x.slug,onChange:e=>g({...x,slug:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500",required:!0}),(0,s.jsxs)("p",{className:"text-sm text-gray-500 mt-1",children:["URL: /blog/",x.slug||"your-slug"]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Category"}),(0,s.jsxs)("select",{value:x.category,onChange:e=>g({...x,category:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500",children:[(0,s.jsx)("option",{value:"",children:"Select Category"}),(0,s.jsx)("option",{value:"deals",children:"Deals & Offers"}),(0,s.jsx)("option",{value:"reviews",children:"Product Reviews"}),(0,s.jsx)("option",{value:"guides",children:"Buying Guides"}),(0,s.jsx)("option",{value:"tips",children:"Student Tips"}),(0,s.jsx)("option",{value:"news",children:"News"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Featured Image"}),(0,s.jsx)("input",{type:"file",accept:"image/*",onChange:h,className:"w-full px-3 py-2 border border-gray-300 rounded-md",disabled:d}),d&&(0,s.jsx)("p",{className:"text-sm text-blue-600 mt-1",children:"Uploading..."}),x.featured_image&&(0,s.jsx)("div",{className:"mt-2",children:(0,s.jsx)("img",{src:x.featured_image,alt:"Preview",className:"h-40 object-cover rounded border"})})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Content * (HTML supported)"}),(0,s.jsx)("textarea",{value:x.content,onChange:e=>g({...x,content:e.target.value}),rows:12,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 font-mono text-sm",placeholder:"<p>Your blog content here...</p>",required:!0})]}),(0,s.jsxs)("div",{className:"border-t pt-6",children:[(0,s.jsx)("h3",{className:"text-lg font-medium mb-4",children:"SEO Settings"}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Meta Title"}),(0,s.jsx)("input",{type:"text",value:x.meta_title,onChange:e=>g({...x,meta_title:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500",maxLength:60}),(0,s.jsxs)("p",{className:"text-sm text-gray-500 mt-1",children:[x.meta_title.length,"/60 characters"]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Meta Description"}),(0,s.jsx)("textarea",{value:x.meta_description,onChange:e=>g({...x,meta_description:e.target.value}),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500",maxLength:160}),(0,s.jsxs)("p",{className:"text-sm text-gray-500 mt-1",children:[x.meta_description.length,"/160 characters"]})]})]})]}),(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("input",{type:"checkbox",id:"published",checked:x.published,onChange:e=>g({...x,published:e.target.checked}),className:"h-4 w-4 text-blue-600 border-gray-300 rounded"}),(0,s.jsx)("label",{htmlFor:"published",className:"ml-2 text-sm text-gray-700",children:"Publish immediately (visible on website)"})]}),(0,s.jsx)("button",{type:"submit",disabled:t||d,className:"w-full bg-green-600 text-white py-2 px-4 rounded-md hover:bg-green-700 disabled:opacity-50",children:t?"Creating...":"Create Blog Post"})]})]})})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[28,441,517,358],()=>t(9311)),_N_E=e.O()}]);
(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[864],{2621:(e,t,a)=>{Promise.resolve().then(a.bind(a,8426))},8426:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>o});var l=a(5155),s=a(2115),r=a(6046),i=a(8173),d=a.n(i);function o(){let e=(0,r.useRouter)(),t=(0,r.useParams)().id,[a,i]=(0,s.useState)(!0),[o,n]=(0,s.useState)(!1),[c,u]=(0,s.useState)(!1),[m,x]=(0,s.useState)(""),[g,p]=(0,s.useState)({title:"",slug:"",content:"",featured_image:"",meta_title:"",meta_description:"",category:"",published:!1});(0,s.useEffect)(()=>{(async()=>{try{let a=await fetch("/api/admin/blogs?id=".concat(t));if(a.ok){let l=await a.json(),s=l.data||l,r=Array.isArray(s)?s.find(e=>e.id===t):s;if(r){var e;p({title:r.title||"",slug:r.slug||"",content:r.content||"",featured_image:r.featured_image||"",meta_title:r.meta_title||"",meta_description:r.meta_description||"",category:r.category||"",published:null!==(e=r.published)&&void 0!==e&&e})}else x("Blog post not found")}else x("Failed to fetch blog post")}catch(e){x("Failed to fetch blog post")}finally{i(!1)}})()},[t]);let h=async e=>{var t;let a=null===(t=e.target.files)||void 0===t?void 0:t[0];if(!a)return;u(!0),x("");let l=new FormData;l.append("file",a);try{let e=await fetch("/api/admin/upload",{method:"POST",body:l}),t=await e.json();e.ok&&t.url?p({...g,featured_image:t.url}):x(t.error||"Failed to upload image")}catch(e){x("Failed to upload image")}finally{u(!1)}},b=async a=>{a.preventDefault(),n(!0),x("");try{let a=await fetch("/api/admin/blogs/".concat(t),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(g)}),l=await a.json();a.ok?e.push("/admin/blogs"):x(l.error||"Failed to update blog post")}catch(e){x("Failed to update blog post")}finally{n(!1)}};return a?(0,l.jsx)("div",{className:"min-h-screen bg-gray-100 flex items-center justify-center",children:(0,l.jsx)("div",{className:"text-gray-500",children:"Loading..."})}):(0,l.jsxs)("div",{className:"min-h-screen bg-gray-100",children:[(0,l.jsx)("header",{className:"bg-white shadow",children:(0,l.jsxs)("div",{className:"max-w-4xl mx-auto px-4 py-6 sm:px-6 lg:px-8 flex justify-between items-center",children:[(0,l.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Edit Blog Post"}),(0,l.jsx)(d(),{href:"/admin/blogs",className:"bg-gray-500 text-white px-4 py-2 rounded-md hover:bg-gray-600",children:"â† Back to Blogs"})]})}),(0,l.jsx)("main",{className:"max-w-4xl mx-auto py-6 sm:px-6 lg:px-8",children:(0,l.jsxs)("form",{onSubmit:b,className:"bg-white shadow rounded-lg p-6 space-y-6",children:[m&&(0,l.jsx)("div",{className:"bg-red-50 text-red-600 p-4 rounded-md",children:m}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Blog Title *"}),(0,l.jsx)("input",{type:"text",required:!0,value:g.title,onChange:e=>p({...g,title:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500",placeholder:"e.g., Top 10 Student Laptops for 2025"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"URL Slug *"}),(0,l.jsxs)("div",{className:"flex gap-2",children:[(0,l.jsx)("input",{type:"text",required:!0,value:g.slug,onChange:e=>p({...g,slug:e.target.value}),className:"flex-1 px-4 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500",placeholder:"top-10-student-laptops-2025"}),(0,l.jsx)("button",{type:"button",onClick:()=>{let e=g.title.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/(^-|-$)/g,"");p({...g,slug:e})},className:"px-4 py-2 bg-gray-200 text-gray-700 rounded-md hover:bg-gray-300",children:"Generate"})]})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Category *"}),(0,l.jsxs)("select",{required:!0,value:g.category,onChange:e=>p({...g,category:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500",children:[(0,l.jsx)("option",{value:"",children:"Select a category"}),(0,l.jsx)("option",{value:"Tech Reviews",children:"Tech Reviews"}),(0,l.jsx)("option",{value:"Study Tips",children:"Study Tips"}),(0,l.jsx)("option",{value:"Deals & Discounts",children:"Deals & Discounts"}),(0,l.jsx)("option",{value:"Student Life",children:"Student Life"}),(0,l.jsx)("option",{value:"Buying Guides",children:"Buying Guides"}),(0,l.jsx)("option",{value:"Budget Tips",children:"Budget Tips"})]})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Featured Image"}),(0,l.jsxs)("div",{className:"flex items-start gap-4",children:[g.featured_image&&(0,l.jsx)("img",{src:g.featured_image,alt:"Preview",className:"w-32 h-20 object-cover rounded-lg border"}),(0,l.jsxs)("div",{className:"flex-1",children:[(0,l.jsx)("input",{type:"file",accept:"image/*",onChange:h,disabled:c,className:"w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-medium file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"}),c&&(0,l.jsx)("p",{className:"text-sm text-gray-500 mt-2",children:"Uploading..."}),(0,l.jsx)("input",{type:"text",value:g.featured_image,onChange:e=>p({...g,featured_image:e.target.value}),placeholder:"Or paste image URL",className:"mt-2 w-full px-4 py-2 border border-gray-300 rounded-md text-sm"})]})]})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Content (HTML) *"}),(0,l.jsx)("textarea",{required:!0,rows:15,value:g.content,onChange:e=>p({...g,content:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500 font-mono text-sm",placeholder:"<p>Your blog content here...</p>"}),(0,l.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Supports HTML formatting: <p>, <h2>, <h3>, <ul>, <ol>, <a>, etc."})]}),(0,l.jsxs)("div",{className:"border-t pt-6",children:[(0,l.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"SEO Settings"}),(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Meta Title"}),(0,l.jsx)("input",{type:"text",value:g.meta_title,onChange:e=>p({...g,meta_title:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500",placeholder:"SEO-optimized title (50-60 characters)",maxLength:70}),(0,l.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:[g.meta_title.length,"/70 characters"]})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Meta Description"}),(0,l.jsx)("textarea",{rows:2,value:g.meta_description,onChange:e=>p({...g,meta_description:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500",placeholder:"Brief description for search results (150-160 characters)",maxLength:170}),(0,l.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:[g.meta_description.length,"/170 characters"]})]})]})]}),(0,l.jsxs)("div",{className:"flex items-center gap-3 pt-4 border-t",children:[(0,l.jsx)("input",{type:"checkbox",id:"published",checked:g.published,onChange:e=>p({...g,published:e.target.checked}),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),(0,l.jsx)("label",{htmlFor:"published",className:"text-sm font-medium text-gray-700",children:"Publish this blog post (visible on site)"})]}),(0,l.jsxs)("div",{className:"flex gap-4 pt-4",children:[(0,l.jsx)("button",{type:"submit",disabled:o||c,className:"flex-1 bg-blue-600 text-white py-3 px-4 rounded-md hover:bg-blue-700 disabled:opacity-50 font-medium",children:o?"Saving...":"Update Blog Post"}),(0,l.jsx)(d(),{href:"/admin/blogs",className:"px-6 py-3 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50",children:"Cancel"})]})]})})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[28,441,517,358],()=>t(2621)),_N_E=e.O()}]);
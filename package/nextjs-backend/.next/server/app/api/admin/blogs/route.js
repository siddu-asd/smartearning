(()=>{var e={};e.id=89,e.ids=[89],e.modules={846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},4870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},9294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},3033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},9011:(e,t,s)=>{"use strict";s.r(t),s.d(t,{patchFetch:()=>x,routeModule:()=>p,serverHooks:()=>m,workAsyncStorage:()=>g,workUnitAsyncStorage:()=>h});var r={};s.r(r),s.d(r,{GET:()=>d,POST:()=>l});var a=s(2706),n=s(8203),o=s(5994),i=s(9187),u=s(1037),c=s(5369);async function l(e){try{{let{authenticated:e,user:t}=await (0,c.J)();if(console.log("Auth check:",{authenticated:e,userId:t?.id}),!e)return i.NextResponse.json({success:!1,error:"Unauthorized - Please log in at /admin/login"},{status:401})}let t=await e.json();if(console.log("\uD83D\uDCDD Creating blog:",{title:t.title,slug:t.slug}),!t.title||!t.slug||!t.content)return i.NextResponse.json({success:!1,error:"Missing required fields: title, slug, content"},{status:400});let s=(0,u.Z)();console.log("\uD83D\uDD0C Supabase admin client created");let r={title:t.title,slug:t.slug,content:t.content,featured_image:t.featured_image||"",meta_title:t.meta_title||t.title,meta_description:t.meta_description||"",category:t.category||"general",published:t.published??!1,created_at:new Date().toISOString()};console.log("\uD83D\uDCE6 Insert data:",r);let{data:a,error:n}=await s.from("blogs").insert(r).select().single();if(n){if(console.error("❌ Supabase error:",JSON.stringify(n,null,2)),"23505"===n.code)return i.NextResponse.json({success:!1,error:"A blog with this slug already exists"},{status:409});return i.NextResponse.json({success:!1,error:"Failed to create blog"},{status:500})}return console.log("✅ Blog created:",a.id),i.NextResponse.json({success:!0,data:a},{status:201})}catch(e){return console.error("Admin blogs API error:",e),i.NextResponse.json({success:!1,error:"Internal server error"},{status:500})}}async function d(){try{let{authenticated:e}=await (0,c.J)();if(!e)return i.NextResponse.json({success:!1,error:"Unauthorized"},{status:401});let t=(0,u.Z)(),{data:s,error:r}=await t.from("blogs").select("*").order("created_at",{ascending:!1});if(r)return i.NextResponse.json({success:!1,error:"Failed to fetch blogs"},{status:500});return i.NextResponse.json({success:!0,data:s})}catch(e){return console.error("Admin blogs GET error:",e),i.NextResponse.json({success:!1,error:"Internal server error"},{status:500})}}let p=new a.AppRouteRouteModule({definition:{kind:n.RouteKind.APP_ROUTE,page:"/api/admin/blogs/route",pathname:"/api/admin/blogs",filename:"route",bundlePath:"app/api/admin/blogs/route"},resolvedPagePath:"C:\\Users\\siddu\\Downloads\\shop-ecommerce-react-template-2025-12-31-12-35-34-utc\\React-Pixio-v1.0-25_Feb_2025\\package\\package\\nextjs-backend\\app\\api\\admin\\blogs\\route.ts",nextConfigOutput:"",userland:r}),{workAsyncStorage:g,workUnitAsyncStorage:h,serverHooks:m}=p;function x(){return(0,o.patchFetch)({workAsyncStorage:g,workUnitAsyncStorage:h})}},6487:()=>{},8335:()=>{},5369:(e,t,s)=>{"use strict";s.d(t,{J:()=>a});var r=s(1487);async function a(){let e=await (0,r.R)(),{data:{user:t},error:s}=await e.auth.getUser();return s||!t?{authenticated:!1,user:null}:{authenticated:!0,user:t}}},1037:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});var r=s(7752);function a(){let e="https://isseiuhezyxyuawtbajk.supabase.co",t=process.env.SUPABASE_SERVICE_ROLE_KEY;if(!e||!t)throw Error("Missing Supabase admin credentials");return(0,r.UU)(e,t,{auth:{autoRefreshToken:!1,persistSession:!1}})}},1487:(e,t,s)=>{"use strict";s.d(t,{R:()=>n});var r=s(9064),a=s(4512);async function n(){let e=await (0,a.UL)();return(0,r.createServerClient)("https://isseiuhezyxyuawtbajk.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imlzc2VpdWhlenl4eXVhd3RiYWprIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Njk3MDA3MDIsImV4cCI6MjA4NTI3NjcwMn0.HLwNG4v0VQjJVaNHAIV0AhuTj3ZNjRnYPHBzJqHuICE",{cookies:{get:t=>e.get(t)?.value,set(t,s,r){try{e.set({name:t,value:s,...r})}catch(e){}},remove(t,s){try{e.set({name:t,value:"",...s})}catch(e){}}}})}}};var t=require("../../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[10,295,452],()=>s(9011));module.exports=r})();